; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

; Using esp32dev board type for ESP32-WROOM development board
; This is the standard board type for ESP32-WROOM modules in PlatformIO
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Set serial port and speed
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200

; Exclude test files from build
build_src_filter = +<*> -<main_test.cpp> -<utils/MPU9250Test.cpp>

; Required libraries
lib_deps =
    fastled/FastLED @ ^3.5.0
    adafruit/Adafruit MPU6050 @ ^2.2.4
    Wire

; Future OTA settings - currently disabled
;upload_protocol = espota
;upload_flags =
;    --port=8266
;    --auth=PrismaTechGauntlet

; LED Test environment
[env:ledtest]
platform = espressif32
board = esp32dev
framework = arduino
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200
build_src_filter = -<*> +<../examples/LEDTest.cpp> +<hardware/LEDInterface.cpp> +<core/Config.cpp> +<utils/DebugTools.cpp>
lib_deps =
    fastled/FastLED @ ^3.5.0
    Wire

; MPU Diagnostic Test environment
[env:mpudiag]
platform = espressif32
board = esp32dev
framework = arduino
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200
build_src_filter = -<*> +<../examples/MPUDiagnosticTest.cpp>
lib_deps =
    adafruit/Adafruit MPU6050 @ ^2.2.4
    Wire

; MPU Unit Test environment - uses files in test/mpu directory
[env:mputest]
platform = espressif32
board = esp32dev
framework = arduino
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200
build_src_filter = -<*> +<../test/mpu/MPU9250Test.cpp> +<../test/mpu/MPU9250TestMain.cpp> +<hardware/MPU9250Interface.cpp> +<utils/DebugTools.cpp>
lib_deps =
    adafruit/Adafruit MPU6050 @ ^2.2.4
    Wire

; Hardware Manager Test environment
[env:hwmtest]
platform = espressif32
board = esp32dev
framework = arduino
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200
build_src_filter = -<*> +<../examples/HardwareManagerTest.cpp> +<hardware/HardwareManager.cpp> +<hardware/MPU9250Interface.cpp> +<hardware/LEDInterface.cpp> +<hardware/PowerManager.cpp> +<core/Config.cpp> +<utils/DebugTools.cpp>
lib_deps =
    fastled/FastLED @ ^3.5.0
    adafruit/Adafruit MPU6050 @ ^2.2.4
    Wire

; MPU Filter Test environment
[env:mpufilter]
platform = espressif32
board = esp32dev
framework = arduino
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200
build_src_filter = -<*> +<../examples/MPUFilterTest.cpp> +<hardware/MPU9250Interface.cpp> +<utils/DebugTools.cpp> +<core/Config.cpp>
lib_deps =
    adafruit/Adafruit MPU6050 @ ^2.2.4
    Wire
